extends ../layout

block header
    script(src='https://code.jquery.com/jquery-3.3.1.min.js', integrity='sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=', crossorigin='anonymous')
    title profile

block content
    h1#id User Profile
    p#result searching
    table
        tr
            td Username
            td#username ***
        tr
            td Name
            td#name ***
        tr
            td Gender
            td#gender ***
        tr
            td Birth
            td#birth ***
        tr
            td Phone
            td#phone ***
        tr
            td Email
            td#email ***
        tr
            td Address
            td#address ***

    script.
        var ID = !{JSON.stringify(id)};
        var status = !{status};
        var data = !{JSON.stringify(data)};
        var adr = !{JSON.stringify(adr)};

        $(document).ready(function () {
            $('#id').text("Checking userID: " + ID)
            console.log(ID)
            if (status === '0') {
                $('#result').text("No such user!")
            } else {
                $('#result').text("Found!")
                if (typeof data.Username !== "undefined")
                    $('#username').text(data.Username)

                if (typeof data.FirstName !== "undefined")
                    $('#Name').text(data.FirstName + data.LastName)

                if (typeof data.Gender !== "undefined")
                    $('#gender').text(data.Gender)

                if (typeof data.Birth !== "undefined")
                    $('#birth').text(data.Birth)

                if (typeof data.Phone !== "undefined")
                    $('#phone').text(data.Phone)

                if (typeof data.Email !== "undefined")
                    $('#email').text(data.Email)

                if (adr !== '') {
                    $('#address').text(displayAdr(adr))
                }
            }
        });
        function displayAdr(adr) {
            var str = "", data = new Array();
            data[0] = adr.StreetNum;
            data[1] = adr.StreetAddress;
            data[2] = adr.City;
            data[3] = adr.State;
            data[4] = adr.Country;
            for (var i = 0; i <= 4; i++) {
                if (str !== "") str += ", ";
                str += data[i];
            }
            str += ' (zip-code: ' + adr.ZipCode + ')';
            return str;
        }